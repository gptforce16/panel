<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Giriş Yap</title>
</head>
<body>
  <h2>Giriş Yap</h2>
  <input type="text" id="kullaniciAdi" placeholder="Kullanıcı Adı">
  <input type="password" id="sifre" placeholder="Şifre">
  <button onclick="girisYap()">Giriş</button>

  <script type="module">
    import { createClient } from "https://esm.sh/@supabase/supabase-js";

    const supabaseUrl = "https://qcrbbvokdkyjjfsgffau.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFjcmJidm9rZGt5ampmc2dmZmF1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUzMTc1MTAsImV4cCI6MjA2MDg5MzUxMH0.TLCqjWowPhDs1s_rQoYFLOKH4iVAc6SV2zECIcPOAfo";
    const supabase = createClient(supabaseUrl, supabaseKey);

    async function girisYap() {
      const kullaniciAdi = document.getElementById("kullaniciAdi").value;
      const sifre = document.getElementById("sifre").value;

      const { data, error } = await supabase
        .from("kullanicilar")
        .select("*")
        .eq("kullanici_adi", kullaniciAdi)
        .eq("sifre", sifre)
        .single();

      if (data) {
        sessionStorage.setItem("girisYapildi", "true");
        sessionStorage.setItem("isletme_id", data.isletme_id);
        window.location.href = "admin.html";
      } else {
        alert("Kullanıcı adı veya şifre yanlış!");
      }
    }
  </script>
</body>
</html>